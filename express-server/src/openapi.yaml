openapi: 3.0.3
info:
  title: ISMDB Server API
  version: "0.3.0"
servers:
  - url: /api
components:
  # TODO: Uncomment
  # securitySchemes:
  #   userToken:
  #     type: http
  #     scheme: bearer
  parameters:
    offsetParam:
      name: offset
      in: query
      description: Number of query items to skip over
      required: false
      schema:
        type: integer
        format: int32
        minimum: 0
    limitParam:
      name: limit
      in: query
      description: Maximum query records to return
      required: false
      schema:
        type: integer
        format: int32
        minimum: 0
    queryParam:
      name: query
      in: query
      description: Shorthand option for substring matching of name fields
      required: true
      schema:
        type: string
    orderParam:
      name: order
      in: query
      description: Fields to sort on
      required: false
      schema:
        type: array
        items:
          type: string
      style: form
      explode: true
    idParam:
      name: id
      in: path
      description: Entity ID
      required: true
      schema:
        $ref: "#/components/schemas/idType"
    preferredParam:
      name: preferred
      in: query
      description: Preferred language, will be moved to the head of the
        returned list of languages
      required: false
      schema:
        type: string
    countParam:
      name: count
      in: query
      description: A count parameter for operations that limit by count
      required: false
      schema:
        type: integer
        format: int32
        minimum: 0
  schemas:
    idType:
      type: integer
      format: int64
      minimum: 0
    countType:
      type: integer
      format: int64
      minimum: 0
    dateTimeType:
      type: string
      format: date-time
    languageType:
      type: string
      nullable: true
    authorNameOrAliasType:
      type: string
    magazineNameType:
      type: string
    magazineAliasesType:
      type: string
      nullable: true
    magazineNotesType:
      type: string
      nullable: true
    magazineIssueNumberType:
      type: string
    referenceNameType:
      type: string
    referenceIsbnType:
      type: string
    tagNameType:
      type: string
    tagDescriptionType:
      type: string
      nullable: true
    tagTypeType:
      type: string
      nullable: true
    matchNameType:
      type: string
    matchTypeType:
      type: string
    newAuthorAliasType:
      type: object
      required:
        - name
      properties:
        name:
          $ref: "#/components/schemas/authorNameOrAliasType"
    authorAliasType:
      allOf:
        - $ref: "#/components/schemas/newAuthorAliasType"
        - type: object
          required:
            - id
          properties:
            id:
              $ref: "#/components/schemas/idType"
    newAuthorType:
      type: object
      required:
        - name
      properties:
        name:
          $ref: "#/components/schemas/authorNameOrAliasType"
        aliases:
          type: array
          items:
            $ref: "#/components/schemas/newAuthorAliasType"
    selectedAuthorType:
      type: object
      required:
        - name
      properties:
        id:
          $ref: "#/components/schemas/idType"
        name:
          $ref: "#/components/schemas/authorNameOrAliasType"
    authorType:
      type: object
      required:
        - id
        - name
        - createdAt
        - updatedAt
      properties:
        id:
          $ref: "#/components/schemas/idType"
        name:
          $ref: "#/components/schemas/authorNameOrAliasType"
        createdAt:
          $ref: "#/components/schemas/dateTimeType"
        updatedAt:
          $ref: "#/components/schemas/dateTimeType"
        aliases:
          type: array
          items:
            $ref: "#/components/schemas/authorAliasType"
    authorWithRefCountType:
      allOf:
        - $ref: "#/components/schemas/authorType"
        - type: object
          required:
            - refcount
          properties:
            refcount:
              $ref: "#/components/schemas/countType"
    authorWithRefsAndAliasesType:
      allOf:
        - $ref: "#/components/schemas/authorWithRefCountType"
        - type: object
          required:
            - references
          properties:
            references:
              type: array
              items:
                $ref: "#/components/schemas/referenceType"
            aliases:
              type: array
              items:
                $ref: "#/components/schemas/authorAliasType"
    newMagazineType:
      type: object
      required:
        - name
      properties:
        name:
          $ref: "#/components/schemas/magazineNameType"
        language:
          $ref: "#/components/schemas/languageType"
        aliases:
          $ref: "#/components/schemas/magazineAliasesType"
        notes:
          $ref: "#/components/schemas/magazineNotesType"
    magazineType:
      allOf:
        - type: object
          required:
            - id
            - createdAt
            - updatedAt
          properties:
            id:
              $ref: "#/components/schemas/idType"
            createdAt:
              $ref: "#/components/schemas/dateTimeType"
            updatedAt:
              $ref: "#/components/schemas/dateTimeType"
        - $ref: "#/components/schemas/newMagazineType"
    magazineWithIssuesType:
      allOf:
        - $ref: "#/components/schemas/magazineType"
        - type: object
          properties:
            issues:
              type: array
              items:
                $ref: "#/components/schemas/abbreviatedMagazineIssueType"
    magazineWithIssueCountType:
      allOf:
        - $ref: "#/components/schemas/magazineType"
        - type: object
          properties:
            issuecount:
              $ref: "#/components/schemas/countType"
    magazineWithIssuesAndReferencesType:
      allOf:
        - $ref: "#/components/schemas/magazineType"
        - type: object
          properties:
            issues:
              type: array
              items:
                $ref: "#/components/schemas/magazineIssueWithReferencesType"
    abbreviatedMagazineIssueType:
      type: object
      required:
        - id
        - issue
      properties:
        id:
          $ref: "#/components/schemas/idType"
        issue:
          $ref: "#/components/schemas/magazineIssueNumberType"
    newMagazineIssueType:
      type: object
      required:
        - issue
        - magazineId
      properties:
        issue:
          $ref: "#/components/schemas/magazineIssueNumberType"
        magazineId:
          $ref: "#/components/schemas/idType"
    updateMagazineIssueType:
      type: object
      required:
        - id
        - issue
        - magazineId
      properties:
        id:
          $ref: "#/components/schemas/idType"
        issue:
          $ref: "#/components/schemas/magazineIssueNumberType"
        magazineId:
          $ref: "#/components/schemas/idType"
    magazineIssueType:
      type: object
      required:
        - id
        - issue
        - magazine
        - createdAt
        - updatedAt
      properties:
        id:
          $ref: "#/components/schemas/idType"
        issue:
          $ref: "#/components/schemas/magazineIssueNumberType"
        magazine:
          $ref: "#/components/schemas/magazineType"
        createdAt:
          $ref: "#/components/schemas/dateTimeType"
        updatedAt:
          $ref: "#/components/schemas/dateTimeType"
    magazineIssueWithReferencesType:
      allOf:
        - $ref: "#/components/schemas/magazineIssueType"
        - type: object
          required:
            - magazineFeatures
          properties:
            magazineFeatures:
              type: array
              items:
                $ref: "#/components/schemas/referenceMagazineFeatureType"
    newBookPublisherType:
      type: object
      required:
        - name
      properties:
        name:
          type: string
        notes:
          type: string
    bookPublisherType:
      type: object
      required:
        - id
        - name
      properties:
        id:
          $ref: "#/components/schemas/idType"
        name:
          type: string
        notes:
          type: string
          nullable: true
        references:
          type: array
          items:
            $ref: "#/components/schemas/referenceType"
        series:
          type: array
          items:
            $ref: "#/components/schemas/bookSeriesType"
    newBookSeriesType:
      type: object
      required:
        - name
      properties:
        name:
          type: string
        notes:
          type: string
        publisherId:
          $ref: "#/components/schemas/idType"
    bookSeriesType:
      type: object
      required:
        - id
        - name
      properties:
        id:
          $ref: "#/components/schemas/idType"
        name:
          type: string
        notes:
          type: string
          nullable: true
        references:
          type: array
          items:
            $ref: "#/components/schemas/referenceType"
        publisher:
          $ref: "#/components/schemas/bookPublisherType"
    referenceBookType:
      type: object
      required:
        - referenceId
      properties:
        referenceId:
          $ref: "#/components/schemas/idType"
        isbn:
          type: string
        seriesNumber:
          type: string
          nullable: true
        series:
          $ref: "#/components/schemas/bookSeriesType"
        publisher:
          $ref: "#/components/schemas/bookPublisherType"
    referenceMagazineFeatureType:
      type: object
      required:
        - referenceId
        - featureTags
      properties:
        referenceId:
          $ref: "#/components/schemas/idType"
        featureTags:
          type: array
          items:
            $ref: "#/components/schemas/featureTagType"
        magazineIssue:
          $ref: "#/components/schemas/magazineIssueType"
        reference:
          $ref: "#/components/schemas/referenceType"
    referencePhotoCollectionType:
      type: object
      required:
        - referenceId
        - location
        - media
      properties:
        referenceId:
          $ref: "#/components/schemas/idType"
        location:
          type: string
        media:
          type: string
    referenceTypeType:
      type: object
      required:
        - id
        - name
        - description
        - notes
      properties:
        id:
          $ref: "#/components/schemas/idType"
        name:
          type: string
        description:
          type: string
        notes:
          type: string
          nullable: true
    newReferenceType:
      type: object
      required:
        - name
        - ReferenceTypeId
        - tags
      properties:
        name:
          $ref: "#/components/schemas/referenceNameType"
        isbn:
          $ref: "#/components/schemas/referenceIsbnType"
        language:
          $ref: "#/components/schemas/languageType"
        ReferenceTypeId:
          $ref: "#/components/schemas/idType"
        MagazineIssueId:
          $ref: "#/components/schemas/idType"
        MagazineIssueNumber:
          $ref: "#/components/schemas/magazineIssueNumberType"
        MagazineId:
          $ref: "#/components/schemas/idType"
        authors:
          type: array
          items:
            $ref: "#/components/schemas/selectedAuthorType"
        tags:
          type: array
          items:
            $ref: "#/components/schemas/tagType"
    updateReferenceType:
      allOf:
        - type: object
          required:
            - id
          properties:
            id:
              $ref: "#/components/schemas/idType"
        - $ref: "#/components/schemas/newReferenceType"
    referenceType:
      type: object
      required:
        - id
        - name
        - referenceType
        - createdAt
        - updatedAt
        - tags
      properties:
        id:
          $ref: "#/components/schemas/idType"
        name:
          $ref: "#/components/schemas/referenceNameType"
        language:
          $ref: "#/components/schemas/languageType"
        createdAt:
          $ref: "#/components/schemas/dateTimeType"
        updatedAt:
          $ref: "#/components/schemas/dateTimeType"
        referenceType:
          $ref: "#/components/schemas/referenceTypeType"
        authors:
          type: array
          items:
            $ref: "#/components/schemas/authorType"
        tags:
          type: array
          items:
            $ref: "#/components/schemas/tagType"
        book:
          $ref: "#/components/schemas/referenceBookType"
        magazineFeature:
          $ref: "#/components/schemas/referenceMagazineFeatureType"
        photoCollection:
          $ref: "#/components/schemas/referencePhotoCollectionType"
    newTagType:
      type: object
      required:
        - name
      properties:
        name:
          $ref: "#/components/schemas/tagNameType"
        description:
          $ref: "#/components/schemas/tagDescriptionType"
        type:
          $ref: "#/components/schemas/tagTypeType"
    tagType:
      allOf:
        - type: object
          required:
            - id
          properties:
            id:
              $ref: "#/components/schemas/idType"
        - $ref: "#/components/schemas/newTagType"
    tagWithRefCountType:
      allOf:
        - $ref: "#/components/schemas/tagType"
        - type: object
          required:
            - refcount
          properties:
            refcount:
              $ref: "#/components/schemas/countType"
    tagWithReferencesType:
      allOf:
        - $ref: "#/components/schemas/tagType"
        - type: object
          required:
            - references
          properties:
            references:
              type: array
              items:
                $ref: "#/components/schemas/referenceType"
    newFeatureTagType:
      type: object
      required:
        - name
      properties:
        name:
          $ref: "#/components/schemas/tagNameType"
        description:
          $ref: "#/components/schemas/tagDescriptionType"
    featureTagType:
      allOf:
        - type: object
          required:
            - id
          properties:
            id:
              $ref: "#/components/schemas/idType"
        - $ref: "#/components/schemas/newFeatureTagType"
    errorObjectType:
      type: object
      required:
        - summary
        - description
      properties:
        code:
          $ref: "#/components/schemas/idType"
        summary:
          type: string
        description:
          type: string
        reference:
          type: string
    queryMatchType:
      type: object
      required:
        - id
        - name
        - type
        - length
      properties:
        id:
          $ref: "#/components/schemas/idType"
        name:
          $ref: "#/components/schemas/matchNameType"
        type:
          $ref: "#/components/schemas/matchTypeType"
        length:
          $ref: "#/components/schemas/countType"
  responses:
    generalErrorResponse:
      description: An error has occurred
      content:
        "application/json":
          schema:
            type: object
            required:
              - error
            properties:
              error:
                $ref: "#/components/schemas/errorObjectType"
    generalError404Response:
      description: Not found
      content:
        "application/json":
          schema:
            type: object
            required:
              - error
            properties:
              error:
                $ref: "#/components/schemas/errorObjectType"
# TODO: Uncomment
# security:
#   - userToken: []
paths:
  "/authors":
    x-exegesis-controller: authorsController
    post:
      summary: Create a new author
      description: Create a new author using the data in the request body.
      operationId: createAuthor
      requestBody:
        description: Author to add
        content:
          "application/json":
            schema:
              $ref: "#/components/schemas/newAuthorType"
        required: true
      responses:
        "201":
          description: New author created
          content:
            "application/json":
              schema:
                type: object
                $ref: "#/components/schemas/authorType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Authors
    get:
      summary: Fetch all authors
      description: Fetch authors as an array. Includes a count of all authors.
      operationId: getAllAuthors
      parameters:
        - $ref: "#/components/parameters/offsetParam"
        - $ref: "#/components/parameters/limitParam"
        - $ref: "#/components/parameters/orderParam"
      responses:
        "200":
          description: All authors
          content:
            "application/json":
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/authorType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Authors
  "/authors/withRefCount":
    x-exegesis-controller: authorsController
    get:
      summary: Fetch all authors with reference counts
      description: Fetch all authors as an array, with each author record
        including the reference count.
      operationId: getAllAuthorsWithRefCount
      parameters:
        - $ref: "#/components/parameters/offsetParam"
        - $ref: "#/components/parameters/limitParam"
        - $ref: "#/components/parameters/orderParam"
      responses:
        "200":
          description: All authors with reference counts
          content:
            "application/json":
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/authorWithRefCountType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Authors
  "/authors/namesAndAliases":
    x-exegesis-controller: authorsController
    get:
      summary: Fetch a list of author names, including aliases
      description: Fetch all author names as an array, including aliases with a
        pointer to the master name.
      operationId: getAuthorNamesAndAliases
      parameters:
        - $ref: "#/components/parameters/offsetParam"
        - $ref: "#/components/parameters/limitParam"
        - $ref: "#/components/parameters/orderParam"
      responses:
        "200":
          description: All author names and aliases
          content:
            "application/json":
              schema:
                type: array
                items:
                  type: object
                  required:
                    - id
                    - name
                  properties:
                    id:
                      $ref: "#/components/schemas/idType"
                    name:
                      $ref: "#/components/schemas/authorNameOrAliasType"
                    aliasOf:
                      $ref: "#/components/schemas/authorNameOrAliasType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Authors
  "/authors/{id}":
    x-exegesis-controller: authorsController
    parameters:
      - $ref: "#/components/parameters/idParam"
    get:
      summary: Fetch a single author by ID
      description: Retrieve a single author by ID. Returns author and alias
        information.
      operationId: getAuthorById
      responses:
        "200":
          description: Author data
          content:
            "application/json":
              schema:
                type: object
                $ref: "#/components/schemas/authorType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Authors
    put:
      summary: Update an author
      description: Update the author record specified by the given ID.
      operationId: updateAuthorById
      requestBody:
        description: Author to update
        content:
          "application/json":
            schema:
              $ref: "#/components/schemas/authorType"
        required: true
      responses:
        "200":
          description: Updated author data
          content:
            "application/json":
              schema:
                type: object
                $ref: "#/components/schemas/authorType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Authors
    delete:
      summary: Delete an author by ID
      description: Delete the specified author. Removes the author from
        associated reference records. Does not delete any reference records.
      operationId: deleteAuthorById
      responses:
        "200":
          description: Author deleted
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Authors
  "/authors/{id}/withRefCount":
    x-exegesis-controller: authorsController
    parameters:
      - $ref: "#/components/parameters/idParam"
    get:
      summary: Fetch a single author with reference count by ID
      description: Retrieve a single author by ID, including the reference
        count. Returns author and alias information.
      operationId: getAuthorByIdWithRefCount
      responses:
        "200":
          description: Author data with reference count
          content:
            "application/json":
              schema:
                type: object
                $ref: "#/components/schemas/authorWithRefCountType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Authors
  "/authors/{id}/withRefsAndAliases":
    x-exegesis-controller: authorsController
    parameters:
      - $ref: "#/components/parameters/idParam"
    get:
      summary: Fetch a single author by ID with all references and aliases
      description: Retrieve a single author by ID, including all the reference
        structures and any author aliases.
      operationId: getAuthorByIdWithReferences
      responses:
        "200":
          description: Author data with references and aliases
          content:
            "application/json":
              schema:
                type: object
                $ref: "#/components/schemas/authorWithRefsAndAliasesType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Authors
        - References
  "/magazines":
    x-exegesis-controller: magazinesController
    post:
      summary: Create a new magazine
      description: Create a new magazine using the data in the request body.
      operationId: createMagazine
      requestBody:
        description: New magazine
        content:
          "application/json":
            schema:
              $ref: "#/components/schemas/newMagazineType"
      responses:
        "201":
          description: New magazine created
          content:
            "application/json":
              schema:
                type: object
                $ref: "#/components/schemas/newMagazineType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Magazines
    get:
      summary: Fetch all magazines
      description: Fetch all magazines as an array. Does not include issue
        information.
      operationId: getAllMagazines
      parameters:
        - $ref: "#/components/parameters/offsetParam"
        - $ref: "#/components/parameters/limitParam"
        - $ref: "#/components/parameters/orderParam"
      responses:
        "200":
          description: All magazines
          content:
            "application/json":
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/magazineWithIssueCountType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Magazines
  "/magazines/withIssues":
    x-exegesis-controller: magazinesController
    get:
      summary: Fetch all magazines with issues
      description: Fetch all magazines as an array. Includes issues information
        as nested arrays.
      operationId: getAllMagazinesWithIssues
      parameters:
        - $ref: "#/components/parameters/offsetParam"
        - $ref: "#/components/parameters/limitParam"
        - $ref: "#/components/parameters/orderParam"
      responses:
        "200":
          description: All magazines with issues
          content:
            "application/json":
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/magazineWithIssuesType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Magazines
        - Issues
  "/magazines/getMostRecentlyUpdated":
    x-exegesis-controller: magazinesController
    get:
      summary: Fetch the most-recently-added-to magazines
      description: Fetch a number of magazines that have been most-recently
        added to.
      operationId: getMostRecentUpdatedMagazines
      parameters:
        - $ref: "#/components/parameters/countParam"
      responses:
        "200":
          description: Most-recently-added-to magazines in descending order
          content:
            "application/json":
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/magazineType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Magazines
  "/magazines/{id}":
    x-exegesis-controller: magazinesController
    parameters:
      - $ref: "#/components/parameters/idParam"
    get:
      summary: Fetch a single magazine by ID
      description: Retrieve a single magazine by the ID. Does not include issue
        information.
      operationId: getMagazineById
      responses:
        "200":
          description: Magazine data
          content:
            "application/json":
              schema:
                type: object
                $ref: "#/components/schemas/magazineType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Magazines
    put:
      summary: Update a magazine by ID
      description: Update a specific magazine by ID.
      operationId: updateMagazineById
      requestBody:
        description: Magazine to update
        content:
          "application/json":
            schema:
              $ref: "#/components/schemas/magazineType"
      responses:
        "200":
          description: Updated magazine
          content:
            "application/json":
              schema:
                type: object
                $ref: "#/components/schemas/magazineType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Magazines
    delete:
      summary: Delete a magazine by ID
      description: Delete a specific magazine by ID. Deletes all issues of the
        magazine and their references.
      operationId: deleteMagazineById
      responses:
        "200":
          description: Magazine deleted
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Magazines
  "/magazines/{id}/withIssues":
    x-exegesis-controller: magazinesController
    parameters:
      - $ref: "#/components/parameters/idParam"
    get:
      summary: Fetch a single magazine by ID with issue information
      description: Retrieve a single magazine by the ID. Includes issue
        information as a nested array. Issues include all reference information
        as well.
      operationId: getMagazineByIdWithIssues
      responses:
        "200":
          description: Magazine data
          content:
            "application/json":
              schema:
                type: object
                $ref: "#/components/schemas/magazineWithIssuesAndReferencesType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Magazines
        - Issues
        - References
  "/issues":
    x-exegesis-controller: issuesController
    post:
      summary: Create a new magazine issue
      description: Create a new issue for the specified magazine.
      operationId: createMagazineIssue
      requestBody:
        description: New issue
        content:
          "application/json":
            schema:
              $ref: "#/components/schemas/newMagazineIssueType"
      responses:
        "201":
          description: New issue created
          content:
            "application/json":
              schema:
                type: object
                $ref: "#/components/schemas/magazineIssueType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Issues
  "/issues/{id}":
    x-exegesis-controller: issuesController
    parameters:
      - $ref: "#/components/parameters/idParam"
    get:
      summary: Get a full magazine issue
      description: Get a full magazine issue with magazine and reference
        information.
      operationId: getMagazineIssueById
      responses:
        "200":
          description: Issue data
          content:
            "application/json":
              schema:
                type: object
                $ref: "#/components/schemas/magazineIssueWithReferencesType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Issues
        - Magazines
        - References
    put:
      summary: Update a magazine issue
      description: Update a magazine issue. Does not affect any associated
        references.
      operationId: updateMagazineIssueById
      requestBody:
        description: Magazine issue to update
        content:
          "application/json":
            schema:
              $ref: "#/components/schemas/updateMagazineIssueType"
      responses:
        "200":
          description: Updated magazine issue
          content:
            "application/json":
              schema:
                type: object
                $ref: "#/components/schemas/magazineIssueType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Issues
    delete:
      summary: Delete a magazine issue
      description: Delete a magazine issues. Deletes all references associated
        with it.
      operationId: deleteMagazineIssueById
      responses:
        "200":
          description: Magazine issue deleted
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Issues
  "/references":
    x-exegesis-controller: referencesController
    post:
      summary: Create a new reference
      description: Create a new reference using the data in the request body.
      # operationId: createReference
      requestBody:
        description: New reference
        content:
          "application/json":
            schema:
              $ref: "#/components/schemas/newReferenceType"
      responses:
        "201":
          description: New reference created
          content:
            "application/json":
              schema:
                type: object
                $ref: "#/components/schemas/referenceType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - References
    get:
      summary: Fetch all references
      description: Fetch all references as an array. Includes author, record
        type and magazine information.
      operationId: getAllReferences
      parameters:
        - $ref: "#/components/parameters/offsetParam"
        - $ref: "#/components/parameters/limitParam"
        - $ref: "#/components/parameters/orderParam"
      responses:
        "200":
          description: All references
          content:
            "application/json":
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/referenceType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - References
        - Authors
        - Magazines
  "/references/{id}":
    x-exegesis-controller: referencesController
    parameters:
      - $ref: "#/components/parameters/idParam"
    get:
      summary: Fetch a single reference by ID
      description: Retrieve a single reference by the ID. Includes author,
        record type and magazine information.
      operationId: getReferenceById
      responses:
        "200":
          description: Reference data
          content:
            "application/json":
              schema:
                type: object
                $ref: "#/components/schemas/referenceType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - References
        - Authors
        - Magazines
    put:
      summary: Update a reference
      description: Update a reference. May result in the creation of new
        authors and/or a new magazine issue record.
      # operationId: updateReferenceById
      requestBody:
        description: Reference to update
        content:
          "application/json":
            schema:
              $ref: "#/components/schemas/updateReferenceType"
      responses:
        "200":
          description: Updated reference
          content:
            "application/json":
              schema:
                type: object
                $ref: "#/components/schemas/referenceType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - References
    delete:
      summary: Delete a single reference by ID
      description: Delete a single reference by the ID. Removes any author
        associations, but does not affect any other related records.
      operationId: deleteReferenceById
      responses:
        "200":
          description: Reference deleted
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - References
  "/publishers":
    x-exegesis-controller: publishersController
    post:
      summary: Create a new publisher
      description: Create a new publisher using the data in the request body.
      operationId: createPublisher
      requestBody:
        description: New publisher
        content:
          "application/json":
            schema:
              $ref: "#/components/schemas/newBookPublisherType"
      responses:
        "201":
          description: New publisher created
          content:
            "application/json":
              schema:
                type: object
                required:
                  - publisher
                properties:
                  publisher:
                    $ref: "#/components/schemas/bookPublisherType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Publishers
    get:
      summary: Fetch all publishers
      description: Fetch all publishers as an array. Includes publishers' data
        with series information filled in.
      operationId: getAllPublishers
      parameters:
        - $ref: "#/components/parameters/offsetParam"
        - $ref: "#/components/parameters/limitParam"
        - $ref: "#/components/parameters/orderParam"
      responses:
        "200":
          description: All publishers
          content:
            "application/json":
              schema:
                type: object
                required:
                  - count
                  - publishers
                properties:
                  count:
                    $ref: "#/components/schemas/countType"
                  publishers:
                    type: array
                    items:
                      $ref: "#/components/schemas/bookPublisherType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Publishers
        - Series
  "/publishers/withReferences":
    x-exegesis-controller: publishersController
    get:
      summary: Fetch all publishers with references included
      description: Fetch all publishers as an array. Includes publishers' data
        with series information and all references of the publishers filled in.
      operationId: getAllPublishersWithReferences
      parameters:
        - $ref: "#/components/parameters/offsetParam"
        - $ref: "#/components/parameters/limitParam"
        - $ref: "#/components/parameters/orderParam"
      responses:
        "200":
          description: All publishers
          content:
            "application/json":
              schema:
                type: object
                required:
                  - count
                  - publishers
                properties:
                  count:
                    $ref: "#/components/schemas/countType"
                  publishers:
                    type: array
                    items:
                      $ref: "#/components/schemas/bookPublisherType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Publishers
        - Series
        - References
  "/publishers/{id}":
    x-exegesis-controller: publishersController
    parameters:
      - $ref: "#/components/parameters/idParam"
    get:
      summary: Fetch a single publisher by ID
      description: Retrieve a single publisher by the ID. Includes full
        publisher information.
      operationId: getPublisherById
      responses:
        "200":
          description: Publisher data
          content:
            "application/json":
              schema:
                type: object
                required:
                  - publisher
                properties:
                  publisher:
                    $ref: "#/components/schemas/bookPublisherType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Publishers
    put:
      summary: Update a publisher by ID
      description: Update a specific publisher by ID.
      operationId: updatePublisherById
      requestBody:
        description: Publisher to update
        content:
          "application/json":
            schema:
              $ref: "#/components/schemas/magazineType"
      responses:
        "200":
          description: Updated publisher
          content:
            "application/json":
              schema:
                type: object
                required:
                  - publisher
                properties:
                  publisher:
                    $ref: "#/components/schemas/bookPublisherType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Publishers
    delete:
      summary: Delete a publisher by ID
      description: Delete a specific publisher by ID.
      operationId: deletePublisherById
      responses:
        "200":
          description: Publisher deleted
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Publishers
  "/publishers/{id}/withReferences":
    x-exegesis-controller: publishersController
    parameters:
      - $ref: "#/components/parameters/idParam"
    get:
      summary: Fetch a single publisher by ID
      description: Retrieve a single publisher by the ID. Includes full
        publisher information and all references and series.
      operationId: getPublisherByIdWithReferences
      responses:
        "200":
          description: Publisher data
          content:
            "application/json":
              schema:
                type: object
                required:
                  - publisher
                properties:
                  publisher:
                    $ref: "#/components/schemas/bookPublisherType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Publishers
        - Series
        - References
  "/series":
    x-exegesis-controller: seriesController
    post:
      summary: Create a new series
      description: Create a new series using the data in the request body.
      operationId: createSeries
      requestBody:
        description: New series
        content:
          "application/json":
            schema:
              $ref: "#/components/schemas/newBookSeriesType"
      responses:
        "201":
          description: New series created
          content:
            "application/json":
              schema:
                type: object
                required:
                  - series
                properties:
                  series:
                    $ref: "#/components/schemas/bookSeriesType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Series
    get:
      summary: Fetch all series
      description: Fetch all series as an array. Includes series data with
        publisher information filled in.
      operationId: getAllSeries
      parameters:
        - $ref: "#/components/parameters/offsetParam"
        - $ref: "#/components/parameters/limitParam"
        - $ref: "#/components/parameters/orderParam"
      responses:
        "200":
          description: All series
          content:
            "application/json":
              schema:
                type: object
                required:
                  - count
                  - series
                properties:
                  count:
                    $ref: "#/components/schemas/countType"
                  series:
                    type: array
                    items:
                      $ref: "#/components/schemas/bookSeriesType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Series
        - Publishers
  "/series/withReferences":
    x-exegesis-controller: seriesController
    get:
      summary: Fetch all series with references included
      description: Fetch all series as an array. Includes series data with
        publisher information and all references in the series filled in.
      operationId: getAllSeriesWithReferences
      parameters:
        - $ref: "#/components/parameters/offsetParam"
        - $ref: "#/components/parameters/limitParam"
        - $ref: "#/components/parameters/orderParam"
      responses:
        "200":
          description: All series
          content:
            "application/json":
              schema:
                type: object
                required:
                  - count
                  - series
                properties:
                  count:
                    $ref: "#/components/schemas/countType"
                  series:
                    type: array
                    items:
                      $ref: "#/components/schemas/bookSeriesType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Series
        - Publishers
        - References
  "/series/{id}":
    x-exegesis-controller: seriesController
    parameters:
      - $ref: "#/components/parameters/idParam"
    get:
      summary: Fetch a single series by ID
      description: Retrieve a single series by the ID. Includes full series
        information.
      operationId: getSeriesById
      responses:
        "200":
          description: Series data
          content:
            "application/json":
              schema:
                type: object
                required:
                  - series
                properties:
                  series:
                    $ref: "#/components/schemas/bookSeriesType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Series
        - Publishers
    put:
      summary: Update a series by ID
      description: Update a specific series by ID.
      operationId: updateSeriesById
      requestBody:
        description: Series to update
        content:
          "application/json":
            schema:
              $ref: "#/components/schemas/magazineType"
      responses:
        "200":
          description: Updated series
          content:
            "application/json":
              schema:
                type: object
                required:
                  - series
                properties:
                  series:
                    $ref: "#/components/schemas/bookSeriesType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Series
    delete:
      summary: Delete a series by ID
      description: Delete a specific series by ID.
      operationId: deleteSeriesById
      responses:
        "200":
          description: Series deleted
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Series
  "/series/{id}/withReferences":
    x-exegesis-controller: seriesController
    parameters:
      - $ref: "#/components/parameters/idParam"
    get:
      summary: Fetch a single series by ID
      description: Retrieve a single series by the ID. Includes full series
        information.
      operationId: getSeriesByIdWithReferences
      responses:
        "200":
          description: Series data
          content:
            "application/json":
              schema:
                type: object
                required:
                  - series
                properties:
                  series:
                    $ref: "#/components/schemas/bookSeriesType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Series
        - Publishers
        - References
  "/tags":
    x-exegesis-controller: tagsController
    post:
      summary: Create a new tag
      description: Create a new tag using the data in the request body.
      operationId: createTag
      requestBody:
        description: Tag to add
        content:
          "application/json":
            schema:
              $ref: "#/components/schemas/newTagType"
        required: true
      responses:
        "201":
          description: New tag created
          content:
            "application/json":
              schema:
                type: object
                required:
                  - tag
                properties:
                  tag:
                    $ref: "#/components/schemas/tagType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Tags
    get:
      summary: Fetch all tags
      description: Fetch tags as an array. Includes a count of all tags.
      operationId: getAllTags
      parameters:
        - $ref: "#/components/parameters/offsetParam"
        - $ref: "#/components/parameters/limitParam"
        - $ref: "#/components/parameters/orderParam"
      responses:
        "200":
          description: All tags
          content:
            "application/json":
              schema:
                type: object
                required:
                  - count
                  - tags
                properties:
                  count:
                    $ref: "#/components/schemas/countType"
                  tags:
                    type: array
                    items:
                      $ref: "#/components/schemas/tagType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Tags
  "/tags/withRefCount":
    x-exegesis-controller: tagsController
    get:
      summary: Fetch all tags with count of tagged references
      description: Fetch tags as an array. Each tag structure includes an extra
        field that counts the number of references tagged by the tag.
      operationId: getAllTagsWithRefCount
      parameters:
        - $ref: "#/components/parameters/offsetParam"
        - $ref: "#/components/parameters/limitParam"
        - $ref: "#/components/parameters/orderParam"
      responses:
        "200":
          description: All tags with reference counts
          content:
            "application/json":
              schema:
                type: object
                required:
                  - count
                  - tags
                properties:
                  count:
                    $ref: "#/components/schemas/countType"
                  tags:
                    type: array
                    items:
                      $ref: "#/components/schemas/tagWithRefCountType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Tags
  "/tags/queryWithRefCount":
    x-exegesis-controller: tagsController
    get:
      summary: Fetch all matching tags with count of tagged references
      description: Fetch tags whose name matches the query value, as an array.
        Each tag structure includes an extra field that counts the number of
        references tagged by the tag.
      operationId: getTagsQueryWithRefCount
      parameters:
        - $ref: "#/components/parameters/offsetParam"
        - $ref: "#/components/parameters/limitParam"
        - $ref: "#/components/parameters/queryParam"
        - $ref: "#/components/parameters/orderParam"
      responses:
        "200":
          description: All matched tags with reference counts
          content:
            "application/json":
              schema:
                type: object
                required:
                  - count
                  - tags
                properties:
                  count:
                    $ref: "#/components/schemas/countType"
                  tags:
                    type: array
                    items:
                      $ref: "#/components/schemas/tagWithRefCountType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Tags
  "/tags/{id}":
    x-exegesis-controller: tagsController
    parameters:
      - $ref: "#/components/parameters/idParam"
    get:
      summary: Fetch a single tag by ID
      description: Retrieve a single tag by the ID. Includes full tag
        information.
      operationId: getTagById
      responses:
        "200":
          description: Tag data
          content:
            "application/json":
              schema:
                type: object
                required:
                  - tag
                properties:
                  tag:
                    $ref: "#/components/schemas/tagType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Tags
    put:
      summary: Update a tag
      description: Update a tag with the information in the request body.
      operationId: updateTagById
      requestBody:
        description: Tag to update
        content:
          "application/json":
            schema:
              $ref: "#/components/schemas/tagType"
        required: true
      responses:
        "200":
          description: Updated tag data
          content:
            "application/json":
              schema:
                type: object
                required:
                  - tag
                properties:
                  tag:
                    $ref: "#/components/schemas/tagType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Tags
    delete:
      summary: Delete a tag by ID
      description: Delete the specified tag. Removes all relational links
        between the tag and any references.
      operationId: deleteTagById
      responses:
        "200":
          description: Tag deleted
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Tags
  "/tags/{id}/withRefCount":
    x-exegesis-controller: tagsController
    parameters:
      - $ref: "#/components/parameters/idParam"
    get:
      summary: Fetch a single tag by ID with a count of tagged references
      description: Retrieve a single tag by ID, including the count of the
        references tagged with the given tag.
      operationId: getTagByIdWithRefCount
      responses:
        "200":
          description: Tag data with reference count
          content:
            "application/json":
              schema:
                type: object
                required:
                  - tag
                properties:
                  tag:
                    $ref: "#/components/schemas/tagWithRefCountType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Tags
  "/tags/{id}/withReferences":
    x-exegesis-controller: tagsController
    parameters:
      - $ref: "#/components/parameters/idParam"
    get:
      summary: Fetch a single tag by ID with all tagged references
      description: Retrieve a single tag by ID, including all the tagged
        references as an array.
      operationId: getTagByIdWithReferences
      responses:
        "200":
          description: Tag data with references
          content:
            "application/json":
              schema:
                type: object
                required:
                  - tag
                properties:
                  tag:
                    $ref: "#/components/schemas/tagWithReferencesType"
        "404":
          $ref: "#/components/responses/generalError404Response"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Tags
        - References
  "/misc/referencetypes":
    x-exegesis-controller: miscController
    get:
      summary: Fetch all reference types as an array
      description: Retrieve all reference types as an array of objects.
      operationId: getAllReferenceTypes
      responses:
        "200":
          description: All reference types
          content:
            "application/json":
              schema:
                type: object
                required:
                  - referenceTypes
                properties:
                  referenceTypes:
                    type: array
                    items:
                      $ref: "#/components/schemas/referenceTypeType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Miscellaneous
  "/misc/languages":
    x-exegesis-controller: miscController
    get:
      summary: Fetch all language strings as an array
      description: Fetch all language strings currently in use from the
        database as an array of strings.
      operationId: getAllLanguages
      parameters:
        - $ref: "#/components/parameters/preferredParam"
      responses:
        "200":
          description: All languages
          content:
            "application/json":
              schema:
                type: object
                required:
                  - languages
                properties:
                  languages:
                    type: array
                    items:
                      $ref: "#/components/schemas/languageType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Miscellaneous
  "/misc/tagtypes":
    x-exegesis-controller: miscController
    get:
      summary: Fetch all tag type strings as an array
      description: Fetch all tag type strings currently in use from the
        database as an array of strings.
      operationId: getAllTagTypes
      responses:
        "200":
          description: All tag types
          content:
            "application/json":
              schema:
                type: object
                required:
                  - types
                properties:
                  types:
                    type: array
                    items:
                      $ref: "#/components/schemas/tagTypeType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Miscellaneous
  "/misc/quicksearch":
    x-exegesis-controller: miscController
    get:
      summary: Quick search by name across the major tables
      description: Fetch all records from tags, references, magazines and
        authors where the "name" field matches the query.
      operationId: quickSearchName
      parameters:
        - $ref: "#/components/parameters/queryParam"
        - $ref: "#/components/parameters/countParam"
      responses:
        "200":
          description: Matching names
          content:
            "application/json":
              schema:
                type: object
                required:
                  - matches
                properties:
                  matches:
                    type: array
                    items:
                      $ref: "#/components/schemas/queryMatchType"
        default:
          $ref: "#/components/responses/generalErrorResponse"
      tags:
        - Miscellaneous
tags:
  - name: Authors
    description: Operations that pertain to authors
  - name: Magazines
    description: Operations that pertain to magazines
  - name: Issues
    description: Operations that pertain to magazine issues
  - name: Publishers
    description: Operations that pertain to book publishers
  - name: References
    description: Operations that pertain to references
  - name: Series
    description: Operations that pertain to book series
  - name: Tags
    description: Operations that pertain to tags
  - name: Miscellaneous
    description: Operations that are not associated with any other group
